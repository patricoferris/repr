name: Github OCaml-CI
on: [push, pull_request]
jobs:
  debian-10-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:72ebeabcbc037edb3c93703cc9889a3cb4f8aa7d4afb29d4968a361d69f90d84
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  debian-10-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:d93447965dffd745351c023839441769a9be5c77625b5c322398ca9f1dfb2638
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  debian-10-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:1ff2b362ab97086663c30b6cb1c4af154c2092c92f340525bff391dce402125f
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:f819466b3f075a16199f02882f8cda7198bf21781eba45c2c67b0ea6979ae8ec
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:4a7fe8cfbb155725c52da4f1d815001bd89ffd8e483b8c2c321396adc82f673d
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  alpine-3_12-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:5de16806b699d1de265f018570784eced803d59286fb5d418d3af3f3b27b78f7
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:66cb7b9d9943e311f67c3fb324f358164ff7af065f7fd285ad3f0f7a08e16f30
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:1c48ed47c17b5fb4fbe7089777bb3dbeab6eb5c217f577d45b56ffac99ff71d5
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  ubuntu-18_04-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:dd753a2049ddee6cfda48b996f2a2dbc23a38122f7f97bbda55237946b0c61ed
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:d141ef3dcc0b3d8ee15ad87b7dabcf26478771a9f1c8e182426bd240047efc50
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:814993e06b269a118d8b16461e3c61049e46cc0e5a0a8f263e9ec1cbfd47e274
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  opensuse-15_2-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:e1f02d20164eb6e141ddf32cdb3d4c4e9ac7e7c7da901d65e89a53625eb82e47
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_11:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:a01b02739f386216897cb3bbcfd0c39edd5aafb8a8b1945119ac2571bc77d00c
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_10:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:001ee18889e98571701784ba45eaaeb0d6a7fbc4e0f05a26398b41874822e70f
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.10.1 ocaml-base-compiler.4.10.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  centos-8-4_09:
    runs-on: ubuntu-latest
    container:
      image: ocurrent/opam@sha256:d7f88ee798ac4609bde20ffa64050de25a66c26e058ae3022d220ebc0ab935e6
      env:
        HOME: /home/opam
      options: --user 1000
    env:
      HOME: /home/opam
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.09.1 ocaml-base-compiler.4.09.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        working-directory: /home/opam
    steps:
    - run: cd ~/opam-repository && (git cat-file -e 7d04495d2d71daf495033d89d28f7fef59ae22b4
        || git fetch origin master) && git reset -q --hard 7d04495d2d71daf495033d89d28f7fef59ae22b4
        && git log --no-decorate -n1 --oneline && opam update -u
    - run: mkdir -p /home/opam/package
    - run: git clone https://github.com/$GITHUB_REPOSITORY . && git checkout $GITHUB_SHA
      working-directory: /home/opam/package
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
      working-directory: /home/opam/package
    - run: opam depext --update -y repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
        $DEPS
      working-directory: /home/opam/package
    - run: opam install $DEPS
      working-directory: /home/opam/package
    - run: opam exec -- dune build @install @runtest && rm -rf _build
      working-directory: /home/opam/package
  winmac:
    strategy:
      matrix:
        operating-system: [windows-latest, macos-latest]
        ocaml-version: [4.11.0, 4.10.0, 4.09.1]
    runs-on: ${{ matrix.operating-system }}
    env:
      DEPS: afl-persistent.1.3 alcotest.1.2.3 astring.0.8.5 base-bigarray.base base-bytes.base
        base-threads.base base-unix.base base64.3.4.0 bechamel.0.1.0 bigarray-compat.1.0.0
        biniou.1.2.1 cmdliner.1.0.4 conf-m4.1 cppo.1.6.6 crowbar.0.2 csexp.1.3.2 cstruct.6.0.0
        dune.2.7.1 dune-configurator.2.7.1 easy-format.1.3.2 fmt.0.8.9 fpath.0.7.3
        hex.1.4.0 jsonm.1.0.1 ocaml.4.11.1 ocaml-base-compiler.4.11.1 ocaml-compiler-libs.v0.12.3
        ocaml-config.1 ocaml-migrate-parsetree.1.7.3 ocamlbuild.0.14.0 ocamlfind.1.8.1
        ocplib-endian.1.1 ppx_derivers.1.2.1 ppx_deriving.4.5 ppx_deriving_yojson.3.5.3
        ppx_tools.6.2 ppxfind.1.4 ppxlib.0.15.0 re.1.9.0 result.1.5 seq.base sexplib0.v0.14.0
        stdlib-shims.0.1.0 topkg.1.0.3 uchar.0.0.2 uuidm.0.9.7 uutf.1.0.2 yojson.1.7.0
    defaults:
      run:
        shell: bash
    steps:
    - uses: actions/checkout@v2
    - uses: avsm/setup-ocaml@v1.1.2
      with:
        ocaml-version: ${{ matrix.ocaml-version }}
    - run: opam pin add -yn repr.dev "./" && opam pin add -yn repr-fuzz.dev "./" &&
        opam pin add -yn repr-bench.dev "./" && opam pin add -yn ppx_repr.dev "./"
    - run: opam depext --update -yt repr.dev repr-fuzz.dev repr-bench.dev ppx_repr.dev
    - run: opam list --short --columns=package > installed.deps; for dep in $DEPS;
        do [[ ! "$dep" =~ $(echo ^\($(paste -sd'|' installed.deps)\)$) && ! "$dep"
        = "ocaml."* && ! "$dep" = "ocaml-base-compiler."* ]] && export NEW_DEPS="$dep
        $NEW_DEPS"; done; echo $NEW_DEPS; opam install $NEW_DEPS
    - run: opam exec -- dune build @install @runtest && rm -rf _build


